<div class="space-y-4">
  <div class="text-xl font-bold">
    {{ initial ? 'Editar Medicamento' : 'Nuevo Medicamento' }}
  </div>

  <form [formGroup]="form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="md:col-span-2">
      <label class="text-sm text-gray-500">Nombre</label>
      <input class="w-full rounded-xl border px-3 py-2" formControlName="nombre" />
    </div>

    <div class="md:col-span-2">
      <label class="text-sm text-gray-500">Laboratorio</label>
<select class="w-full rounded-xl border px-3 py-2" formControlName="laboratorioId">
  <option [ngValue]="null" disabled>Seleccione un laboratorio…</option>
  <option *ngFor="let lab of labs; trackBy: trackLab" [ngValue]="lab.id">
    {{ lab.id }} — {{ lab.nombre }}
  </option>
</select>
</div>
<div class="text-xs text-red-600 mt-1" *ngIf="form.controls.laboratorioId.hasError('labNotAllowed') && form.controls.laboratorioId.touched">
  El laboratorio debe ser 1, 2 o 3.
</div>


    <div>
      <label class="text-sm text-gray-500">Fecha de Fabricación</label>
      <input type="date" class="w-full rounded-xl border px-3 py-2" formControlName="fechaFabricacion" />
    </div>

    <div>
      <label class="text-sm text-gray-500">Fecha de Vencimiento</label>
      <input type="date" class="w-full rounded-xl border px-3 py-2" formControlName="fechaVencimiento" />
    </div>

    <div>
      <label class="text-sm text-gray-500">Cantidad en Stock</label>
      <input type="number" class="w-full rounded-xl border px-3 py-2" formControlName="cantidadStock" />
    </div>

    <div>
      <label class="text-sm text-gray-500">Precio Unitario</label>
      <input type="number" class="w-full rounded-xl border px-3 py-2" formControlName="valorUnitario" />
    </div>
  </form>

  <div class="flex justify-end gap-2">
    <button class="px-3 py-2 rounded-xl border" (click)="cancel.emit()">Cancelar</button>
    <button class="px-3 py-2 rounded-xl bg-sky-600 text-white disabled:opacity-60"
            [disabled]="form.invalid"
            (click)="onSave()">
      {{ initial ? 'Actualizar Medicamento' : 'Crear Medicamento' }}
    </button>
  </div>
</div>
